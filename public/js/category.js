$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var table=$("#tableCategory").DataTable({processing:!0,serverSide:!0,info:!1,ajax:{url:"api/categories"},columns:[{data:"id",name:"id"},{data:"description",name:"description"},{data:"action",name:"action",orderable:!1,searchable:!1}],autowidth:!1,language:{sEmptyTable:"Nenhum registro encontrado",sInfo:"Mostrando de _START_ até _END_ de _TOTAL_ registros",sInfoEmpty:"Mostrando 0 até 0 de 0 registros",sInfoFiltered:"(Filtrados de _MAX_ registros)",sInfoPostFix:"",sInfoThousands:".",sLengthMenu:"_MENU_ resultados por página",sLoadingRecords:"Carregando...",sProcessing:"Processando...",sZeroRecords:"Nenhum registro encontrado",sSearch:"Pesquisar",oPaginate:{sNext:"Próximo",sPrevious:"Anterior",sFirst:"Primeiro",sLast:"Último"},oAria:{sSortAscending:": Ordenar colunas de forma ascendente",sSortDescending:": Ordenar colunas de forma descendente"}},columnDefs:[{targets:"_all",className:"text-center"}]});$(".addCategory").click(function(e){e.preventDefault(),$("#modalAddCategory").modal("show")}),$("#createNewCategory").click(function(){$(this).attr("disabled","disabled").text("Cadastrando...");let e=$('meta[name="csrf-token"]').attr("content");var t=$("#newCategory").serialize()+"&_token="+e;console.log(t),$.ajax({type:"POST",url:"api/categories",data:t,success:function(e){table.draw(),$("#modalAddCategory").modal("hide"),$("#createNewCategory").removeAttr("disabled","disabled").text("Cadastrar"),$("#newCategory").trigger("reset"),Swal.fire("Cadastrado!",e.success,"success")},error:function(e){alert("não foi")}})}),$("body").on("click",".deleteCategory",function(){var e=$(this).data("id");let t=`api/categories/${e}`;$.ajax({url:t,type:"GET",success:function(t){t&&Swal.fire({position:"top",title:"Essa ação é irreversível",text:"Tem certeza que deseja excluir a categoria de "+t[0].description+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Deletar"}).then(t=>{if(t.value){let t=$('meta[name="csrf-token"]').attr("content");$.ajax({type:"DELETE",url:`api/categories/${e}`,data:{_token:t},success:function(e){table.draw(),Swal.fire({position:"top",title:"Excluido!",text:e.success,icon:"success"})}})}})}})}),$("body").on("click",".openEditCategoryModal",function(e){e.preventDefault();let t=`api/categories/${$(this).data("id")}`;$.ajax({url:t,type:"GET",success:function(e){e&&($("#idEdit").val(e[0].id),$("#descriptionEdit").val(e[0].description),$("#modalEditCategory").modal("show"))}})}),$("#ButtonEditCategory").click(function(){$(this).attr("disabled","disabled").text("Editando...");var e=$("#idEdit").val(),t=$("#descriptionEdit").val();let a=`api/categories/${e}`,o=$('meta[name="csrf-token"]').attr("content");$.ajax({url:a,type:"PUT",data:{id:e,description:t,token:o},dataType:"JSON",success:function(e){e&&(table.draw(),$("#modalEditCategory").modal("hide"),$("#ButtonEditCategory").removeAttr("disabled","disabled").text("Editar"),Swal.fire("Editado!",e.success,"success"))},error:function(e,t,a){console.log(t),console.log(a),console.log(e)}})});
